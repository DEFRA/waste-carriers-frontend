<main id="content" role="main" class="group">
  <article role="article" class="group">
    <% content_for :page_title, createTitle('registrations.contactdetails_step.title') %>
    <%= form_for(@registration, :url => upper_contact_details_path) do |f| %>
    <div class="step"><%= t 'registrations.contactdetails_step.step' %></div>

    <% case  @registration.businessType %>
    <% when 'soleTrader' %>
      <h1 class="subtitle"><%= t 'registrations.contactdetails_step.subtitle_upper', business_caption: 'business' %></h1>
      <%= render "contactdetails_step", f: f , registration_phase: 'upper'  %>
      <%= render 'address_finder ', f: f %>
    <% when 'limitedCompany' %>
      <h1 class="subtitle"><%= t 'registrations.contactdetails_step.subtitle_upper', business_caption: 'business' %></h1>
      <%= render 'company_details_finder', f: f%>
    <% when 'publicBody' %>
      <h1 class="subtitle"><%= t 'registrations.contactdetails_step.subtitle_upper', business_caption: 'organisation' %></h1>
      <%= render "contactdetails_step", f: f , registration_phase: 'upper'  %>
      <%= render 'address_finder', f: f %>
    <% end %>

  <% end %>
<!-- TODO: back button doesn't work with wizard link, but works with the code below. Thing is, we can't have bothj
     wizard_links and this code as this places two back buttons on screen       -->
        <p class="action group">
        <%= link_to t('upper_registrations.form.back_button_label'), :newRegistrationType, :class => 'button-secondary' %>
        <%= link_to t('upper_registrations.form.next_button_label'), :upper_contact_details, :class => 'button-secondary' %>
      </p>


  </article>
</main>
