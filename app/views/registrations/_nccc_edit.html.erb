
<%= render "errors" %>
  
<% if params[:note] %>
<div id="note_explanation" class="note-summary">
  <h1><%= params[:note]%></h1>
</div>
<% end %>

<!-- WF 4.3.1 -->
<div id="page1"  data-journey="waste-carriers-registration:edit">

<fieldset>
<legend><%= t 'registrations.business_step.business_or_org_details' %></legend>

<p class="group<%if @registration.errors[:businessType].any?%> validation<%end%>">
	<%= validation_for(@registration, :businessType) %>
	<%= f.label :businessType %>
	<%= f.select :businessType, options_for_select(Registration.business_type_options_for_select,f.object.businessType) %>
</p>
<p class="group<%if @registration.errors[:companyName].any?%> validation<%end%>">
	<%= validation_for(@registration, :companyName) %>
	<%= f.label :companyName %>
	<%= f.text_field :companyName%>
</p>

</fieldset>

</div>

<!-- WF 4.3.2 -->
<div id="page2">

<%= render "address_entry",:f=>f %>


<fieldset>
<legend><%= t 'registrations.contact_step.contact_information_legend' %></legend>

<p class="group<%if @registration.errors[:title].any?%> validation<%end%>">
	<%= validation_for(@registration, :title) %>
	<%= f.label :title %>
	<%= f.select :title , options_for_select(Registration.title_options_for_select,f.object.title ) %>
</p>
<p id="titleOtherWrapper" class="group js-hidden<%if @registration.errors[:otherTitle].any?%> validation<%end%>">
	<%= validation_for(@registration, :otherTitle) %>
    <%= f.label :otherTitle, "Other title" %>
    <%= f.text_field :otherTitle %>
</p>
<p class="group<%if @registration.errors[:firstName].any?%> validation<%end%>">
	<%= validation_for(@registration, :firstName) %>
    <%= f.label :firstName %>
    <%= f.text_field :firstName %>
</p>
<p class="group<%if @registration.errors[:lastName].any?%> validation<%end%>">
	<%= validation_for(@registration, :lastName) %>
    <%= f.label :lastName %>
    <%= f.text_field :lastName %>
</p>
<p class="group<%if @registration.errors[:phoneNumber].any?%> validation<%end%>">
	<%= validation_for(@registration, :phoneNumber) %>
    <%= f.label :phoneNumber %>
    <%= f.text_field :phoneNumber %>
</p>
<p class="group<%if @registration.errors[:contactEmail].any?%> validation<%end%>">
	<%= validation_for(@registration, :contactEmail) %>
    <%= f.label :contactEmail %>
    <%= f.text_field :contactEmail%>
</p>
<p class="group">
	<i>Registered on: <%= format_date(@registration.metaData.dateRegistered) %></i>
	<!--<br/><i>Created by: <%= @registration.metaData.route %> (<%= @registration.routeName %>)</i>-->
</p>
</fieldset>

</div>
<p class="action group">
<% if agency_user_signed_in? %>
  <%= link_to t('registrations.form.back_button_label'), registrations_path, :class => 'button-secondary' %>
<% else logger.debug 'User not signed in so Redirect back to my account page' %>
  <%= link_to t('registrations.form.back_button_label'), userRegistrations_path(current_user.id), :class => 'button-secondary' %>
<% end %>
<input name="reprint" class="button-secondary" type="submit" value="<%= t 'registrations.form.print_button_label' %>"/>
<input name="next" class="button" type="submit" value="<%= t 'registrations.form.update_button_label' %>"/>
<% if agency_user_signed_in? %>
<% if @registration.metaData.status == "REVOKED" %>
<input name="unrevoke" class="button revoke" type="submit" value="<%= t 'registrations.form.unrevoke_button_label' %>"/>
<% else %>
<input name="revoke" class="button revoke" type="submit" value="<%= t 'registrations.form.revoke_button_label' %>"/>
<% end %>
<% end %>
</p>