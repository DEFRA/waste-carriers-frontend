<main id="content" role="main" class="group"><article role="article" class="group">

<%= form_for(@registration) do |f| %>

<h1>Waste Carrier Registration</h1>
<h2 class="subtitle">For a lower tier waste carrier, broker or dealer</h2>

<div id="progress-wrapper">Progress: <div id="progress"></div></div>

  <% if @registration.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@registration.errors.count, "error") %> prohibited this registration from being saved:</h2>

      <ul>
      <% @registration.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


<!-- WF 4.3.1 -->
<div id="page1">


<fieldset>
<legend>Business or organisation details</legend>

<p class="group">
<%= f.label :registerAs, "Register as" %>
<%= f.select :registerAs, options_for_select([["Please select...",""],["Carrier","carrier"],["Broker","broker"],["Dealer","dealer"]],f.object.registerAs) %>
</p>

<p class="group">
<%= f.label :organisationType, "Business or organisation type" %>
<%= f.select :organisationType , options_for_select([["Please select...",""],["An individual","individual"],["An organisation of individuals (such as a charity)","organisationOfIndividuals"],["A limited company or limited liability partnership (LLP)","limitedCompany"],["A public body","publicBody"]],f.object.organisationType ) %>
</p>

<div id="orgTypeQuestions" class="js-hidden">

<p class="group">
<%= f.label :organisationName, "Business, organisation or trading name" %>
<%= f.text_field :organisationName %>
</p>

<p id="indType-wrapper" class="group">
<%= f.label :individualsType, "Organisation type" %>
<%= f.select :individualsType , options_for_select([["Please select...",""],["Charity","charity"]],f.object.individualsType) %>
</p>

<p id="regNumber-wrapper" class="group">
<%= f.label :companyRegistrationNumber, "Company registration number" %>
<%= f.text_field :companyRegistrationNumber %>
</p>

<p id="publicBodyType-wrapper" class="group">
<%= f.label :publicBodyType, "Type of public body" %>
<%= f.select :publicBodyType , options_for_select([["Please select...",""]],f.object.publicBodyType ) %>
</p>
</div>

</fieldset>


</div>

<!-- WF 4.3.2 -->
<div id="page2" style="display: none">

<h2>Address and contact details</h2>

<fieldset>
<legend>Principal (main) business, organisation or trading address</legend>


<div id="addressSearch">
<p class="group">
<%= f.label :houseNumber, "House number" %>
<%= f.text_field :houseNumber %>
</p>

<p class="group">
    <%= f.label :postcode, "Postcode" %>
    <%= f.text_field :postcode %>
</p>

<p class="action group">
<input name="findAddress" class="button" type="submit" value="Find address"/>
</p>
</div>

<div id="addressSearchResults" style="display:none">
<p class="group">
<label for="addresses"><span id="resultCount">5</span> Addresses found</label>
<select id="addresses">
<option>Please select an address..</option>
</select>
</p>
</div>

<div id="selectedAddress" style="display:none">
<div id="addressDisplay">
</div>
<p class="action group">
<input name="changeAddress" class="button-secondary" type="submit" value="Change address"/>
</p>
</div>

<%= f.hidden_field :uprn %>
<%= f.hidden_field :address %>
</fieldset>

<fieldset>
<legend>Contact information</legend>

<p class="group">
<%= f.label :title %>
<%= f.select :title , options_for_select([["Please select...",""],["Mr"],["Mrs"],["Miss"]],f.object.title ) %>
</p>
<p class="group">
    <%= f.label :firstName, "First name" %>
    <%= f.text_field :firstName %>
</p>
<p class="group">
    <%= f.label :lastName, "Last name" %>
    <%= f.text_field :lastName %>
</p>
<p class="group">
    <%= f.label :phoneNumber, "Phone number" %>
    <%= f.text_field :phoneNumber %>
</p>
<p class="group">
    <%= f.label :emailAddress, "Email address" %>
    <%= f.text_field :emailAddress %>
</p>
</fieldset>

<!--<p class="action group">
<input name="next" type="submit" value="Next"/>
<input name="back" type="submit" value="Back"/>
</p>-->

</div>


<!-- WF 4.3.3 -->
<div id="page3" style="display: none">
<h2>Check details and register</h2>
<fieldset>
<legend>Summary of registration</legend>
<div id="summary"></div>
</fieldset>

<fieldset>
<legend>Declaration</legend>

<p>&lt;Legal text&gt;</p>

<p class="option group">
<label for="declaration"><input id="declaration" type="checkbox" />I declare that as far as I know and believe, the information in this registration is true.</label>
</p>

</fieldset>

</div>

<p class="action group">
<input name="register" class="button js-hidden" type="submit" value="Register"/>
<input name="next" class="button nojs-hidden" type="submit" value="Next"/>
<input name="back" class="button-secondary nojs-hidden" type="submit" value="Back"/>
</p>

<% end %>
</article></main>